const a6_0x3bbd7d=a6_0x428d;(function(_0x20304f,_0x2c7bf0){const _0x458c91=a6_0x428d,_0x4833fa=_0x20304f();while(!![]){try{const _0x5a44ef=-parseInt(_0x458c91(0x13e))/0x1+parseInt(_0x458c91(0x11e))/0x2+parseInt(_0x458c91(0x126))/0x3*(-parseInt(_0x458c91(0x125))/0x4)+parseInt(_0x458c91(0x15f))/0x5*(-parseInt(_0x458c91(0x118))/0x6)+parseInt(_0x458c91(0x159))/0x7+-parseInt(_0x458c91(0x12d))/0x8+parseInt(_0x458c91(0x14a))/0x9*(parseInt(_0x458c91(0x154))/0xa);if(_0x5a44ef===_0x2c7bf0)break;else _0x4833fa['push'](_0x4833fa['shift']());}catch(_0x179e87){_0x4833fa['push'](_0x4833fa['shift']());}}}(a6_0x1d4a,0x8037d));const a6_0x2fa330=(function(){let _0x557357=!![];return function(_0x3ae53c,_0x31b118){const _0x4bb720=_0x557357?function(){if(_0x31b118){const _0x278972=_0x31b118['apply'](_0x3ae53c,arguments);return _0x31b118=null,_0x278972;}}:function(){};return _0x557357=![],_0x4bb720;};}()),a6_0x27f9b5=a6_0x2fa330(this,function(){const _0x53950d=a6_0x428d;return a6_0x27f9b5['toString']()[_0x53950d(0x10e)](_0x53950d(0x130))['toString']()['constructor'](a6_0x27f9b5)['search'](_0x53950d(0x130));});a6_0x27f9b5();'use strict';function a6_0x1d4a(){const _0x26d8f4=['existsSync','function','(((.+)+)+)+$','/upload-images/:productID','apply','next','json','error','__rest','value','get','unlink','filename','params','indexOf','__esModule','622236BScBsB','storage','Router','Product\x20not\x20found\x20for\x20the\x20given\x20company','Images\x20uploaded\x20successfully','getOwnPropertySymbols','message','Image\x20file\x20does\x20not\x20exist\x20on\x20the\x20server','Product\x20added\x20successfully','protocol','storage/','path','8326701lfIPZL','extname','Delete\x20Image\x20Error:','includes','File\x20Deletion\x20Error:','Image\x20not\x20associated\x20with\x20this\x20product','save','put','Image\x20Upload\x20Error:','hasOwnProperty','30LYRzVu','defineProperty','Error\x20retrieving\x20product:','imagesID','join','2088534oWBblp','Internal\x20server\x20error','call','Product\x20deleted\x20successfully','Product','host','11005cmnQGP','Image\x20deleted\x20successfully','find','/all/:ownerID','No\x20products\x20found\x20for\x20the\x20given\x20user','multer','/get/one/:productID','No\x20products\x20found\x20for\x20this\x20owner','length','Product\x20not\x20found\x20or\x20unauthorized','Product\x20updated\x20successfully','status','findOneAndUpdate','://','express','__awaiter','array','image-','search','filter','default','post','prototype','findOne','Failed\x20to\x20delete\x20the\x20file','User\x20ID\x20or\x20email\x20is\x20required','__importDefault','sendFile','438fiiLCF','Get\x20Images\x20Error:','delete','done','/delete/:id','random','393560EbwStb','then','/storage/','findOneAndDelete','map','diskStorage','../middlewares/authorise','3693316opqmoi','3wAneJl','/delete-image/:productID/:filename','Missing\x20required\x20fields','round','files','Product\x20retrieved\x20successfully','Products\x20retrieved\x20successfully','8314320UsZbAE'];a6_0x1d4a=function(){return _0x26d8f4;};return a6_0x1d4a();}function a6_0x428d(_0x28a8e5,_0x43cb78){const _0x3796a6=a6_0x1d4a();return a6_0x428d=function(_0x27f9b5,_0x2fa330){_0x27f9b5=_0x27f9b5-0xfe;let _0x1d4a91=_0x3796a6[_0x27f9b5];return _0x1d4a91;},a6_0x428d(_0x28a8e5,_0x43cb78);}var __awaiter=this&&this[a6_0x3bbd7d(0x10b)]||function(_0x410541,_0x2d7df4,_0xbfc8a3,_0x52bc7c){function _0x14bb2f(_0x47b23e){return _0x47b23e instanceof _0xbfc8a3?_0x47b23e:new _0xbfc8a3(function(_0x3202a2){_0x3202a2(_0x47b23e);});}return new(_0xbfc8a3||(_0xbfc8a3=Promise))(function(_0x41ac1a,_0x548366){const _0x2ecdb9=a6_0x428d;function _0x495791(_0x364360){const _0x5927cf=a6_0x428d;try{_0xce1917(_0x52bc7c[_0x5927cf(0x133)](_0x364360));}catch(_0x277f73){_0x548366(_0x277f73);}}function _0x3e9802(_0x2737c3){try{_0xce1917(_0x52bc7c['throw'](_0x2737c3));}catch(_0x2ad7d4){_0x548366(_0x2ad7d4);}}function _0xce1917(_0x3cc387){const _0x588ccb=a6_0x428d;_0x3cc387[_0x588ccb(0x11b)]?_0x41ac1a(_0x3cc387[_0x588ccb(0x137)]):_0x14bb2f(_0x3cc387['value'])[_0x588ccb(0x11f)](_0x495791,_0x3e9802);}_0xce1917((_0x52bc7c=_0x52bc7c[_0x2ecdb9(0x132)](_0x410541,_0x2d7df4||[]))[_0x2ecdb9(0x133)]());});},__rest=this&&this[a6_0x3bbd7d(0x136)]||function(_0x90ede1,_0x2074bc){const _0x57dc48=a6_0x3bbd7d;var _0x39a372={};for(var _0x323509 in _0x90ede1)if(Object[_0x57dc48(0x112)][_0x57dc48(0x153)]['call'](_0x90ede1,_0x323509)&&_0x2074bc[_0x57dc48(0x13c)](_0x323509)<0x0)_0x39a372[_0x323509]=_0x90ede1[_0x323509];if(_0x90ede1!=null&&typeof Object['getOwnPropertySymbols']===_0x57dc48(0x12f))for(var _0x1e70c1=0x0,_0x323509=Object[_0x57dc48(0x143)](_0x90ede1);_0x1e70c1<_0x323509['length'];_0x1e70c1++){if(_0x2074bc[_0x57dc48(0x13c)](_0x323509[_0x1e70c1])<0x0&&Object[_0x57dc48(0x112)]['propertyIsEnumerable'][_0x57dc48(0x15b)](_0x90ede1,_0x323509[_0x1e70c1]))_0x39a372[_0x323509[_0x1e70c1]]=_0x90ede1[_0x323509[_0x1e70c1]];}return _0x39a372;},__importDefault=this&&this[a6_0x3bbd7d(0x116)]||function(_0x228795){return _0x228795&&_0x228795['__esModule']?_0x228795:{'default':_0x228795};};Object[a6_0x3bbd7d(0x155)](exports,a6_0x3bbd7d(0x13d),{'value':!![]});const express_1=__importDefault(require(a6_0x3bbd7d(0x10a))),Product_1=require('../models/Product'),authorise_1=__importDefault(require(a6_0x3bbd7d(0x124))),authorise_2=__importDefault(require('../middlewares/authorise')),multer_1=__importDefault(require(a6_0x3bbd7d(0x101))),path_1=__importDefault(require(a6_0x3bbd7d(0x149))),fs_1=__importDefault(require('fs')),router=express_1['default'][a6_0x3bbd7d(0x140)](),storage=multer_1[a6_0x3bbd7d(0x110)][a6_0x3bbd7d(0x123)]({'destination':(_0x5c60bf,_0xef61e6,_0x35c522)=>{const _0x191aab=a6_0x3bbd7d;_0x35c522(null,_0x191aab(0x148));},'filename':(_0x2ac3f8,_0x389d44,_0x4b475b)=>{const _0x1272c5=a6_0x3bbd7d,_0xd8bc38=Date['now']()+'-'+Math[_0x1272c5(0x129)](Math[_0x1272c5(0x11d)]()*0x3b9aca00),_0x200eb7=path_1[_0x1272c5(0x110)][_0x1272c5(0x14b)](_0x389d44['originalname']);_0x4b475b(null,_0x1272c5(0x10d)+_0xd8bc38+_0x200eb7);}}),upload=(0x0,multer_1[a6_0x3bbd7d(0x110)])({'storage':storage});router[a6_0x3bbd7d(0x111)]('/add',authorise_1['default'],(_0x2ba31e,_0x3f95cf)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1a5b6a=a6_0x3bbd7d;try{const {ownerID:_0x59a416,companyID:_0xcd923c,name:_0x144c88,commercialName:_0x303428,material:_0x38d3f7,producer:_0x5d923c,suppliers:_0x5bc3d7,origin:_0x4f007b,category:_0x35b196,components:_0x230af0,price:_0x5b054f,profitPercent:_0x341463,manufactureYear:_0x230656,productionYear:_0x369485,isUsed:_0x519714,weight:_0x362d00,stock:_0x9d95da,dimensions:_0x54724b,sizes:_0x368cc5,purity:_0x3a0711,linkedQR:_0x2bf751,description:_0x105865,imagesID:_0x577748,videosID:_0x54bf4b}=_0x2ba31e['body'];if(!_0x59a416||!_0xcd923c||!_0x144c88||!_0x5d923c||!_0x5b054f||!_0x341463||!_0x230656||!_0x369485||!_0x9d95da){_0x3f95cf['status'](0x190)[_0x1a5b6a(0x134)]({'message':_0x1a5b6a(0x128)});return;}const _0x5bd01c=new Product_1['Product']({'ownerID':_0x59a416,'companyID':_0xcd923c,'name':_0x144c88,'producer':_0x5d923c,'price':_0x5b054f,'profitPercent':_0x341463,'manufactureYear':_0x230656,'productionYear':_0x369485,'commercialName':_0x303428,'material':_0x38d3f7,'suppliers':_0x5bc3d7,'origin':_0x4f007b,'category':_0x35b196,'components':_0x230af0,'isUsed':_0x519714,'weight':_0x362d00,'stock':_0x9d95da,'dimensions':_0x54724b,'sizes':_0x368cc5,'purity':_0x3a0711,'linkedQR':_0x2bf751,'description':_0x105865,'imagesID':_0x577748,'videosID':_0x54bf4b});yield _0x5bd01c['save'](),_0x3f95cf[_0x1a5b6a(0x107)](0xc9)[_0x1a5b6a(0x134)]({'message':_0x1a5b6a(0x146),'product':_0x5bd01c});}catch(_0x35626c){_0x3f95cf[_0x1a5b6a(0x107)](0x1f4)[_0x1a5b6a(0x134)]({'message':_0x1a5b6a(0x15a),'error':_0x35626c});}})),router[a6_0x3bbd7d(0x151)]('/edit/:id',authorise_1[a6_0x3bbd7d(0x110)],(_0x497e8a,_0x5c3ecb)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x29603c=a6_0x3bbd7d;try{const {id:_0x5b809e}=_0x497e8a['params'],{userID:_0x8899c}=_0x497e8a,_0x2012a8=__rest(_0x497e8a['body'],[]),_0x1e313b=yield Product_1[_0x29603c(0x15d)][_0x29603c(0x108)]({'_id':_0x5b809e,'ownerID':_0x8899c},_0x2012a8,{'new':!![],'runValidators':!![]});if(!_0x1e313b){_0x5c3ecb[_0x29603c(0x107)](0x194)[_0x29603c(0x134)]({'message':_0x29603c(0x105)});return;}_0x5c3ecb['status'](0xc8)['json']({'message':_0x29603c(0x106),'product':_0x1e313b});}catch(_0x1d9dff){_0x5c3ecb['status'](0x1f4)[_0x29603c(0x134)]({'message':_0x29603c(0x15a),'error':_0x1d9dff});}})),router[a6_0x3bbd7d(0x11a)](a6_0x3bbd7d(0x11c),authorise_1[a6_0x3bbd7d(0x110)],(_0x2bbaa2,_0x37d51c)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3238b7=a6_0x3bbd7d;try{const {id:_0x3edd22}=_0x2bbaa2[_0x3238b7(0x13b)],{userID:_0x4fb0bd}=_0x2bbaa2,_0x4af7ce=yield Product_1[_0x3238b7(0x15d)][_0x3238b7(0x121)]({'_id':_0x3edd22,'owenerID':_0x4fb0bd});if(!_0x4af7ce){_0x37d51c[_0x3238b7(0x107)](0x194)['json']({'message':_0x3238b7(0x105)});return;}_0x37d51c[_0x3238b7(0x107)](0xc8)['json']({'message':_0x3238b7(0x15c)});}catch(_0x55658f){_0x37d51c[_0x3238b7(0x107)](0x1f4)[_0x3238b7(0x134)]({'message':_0x3238b7(0x15a),'error':_0x55658f});}})),router[a6_0x3bbd7d(0x138)](a6_0x3bbd7d(0xff),authorise_1['default'],(_0xd9b831,_0xec69c3)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2cb7c3=a6_0x3bbd7d;try{const {ownerID:_0x48f243}=_0xd9b831['params'],_0x3a0d32=yield Product_1[_0x2cb7c3(0x15d)][_0x2cb7c3(0xfe)]({'ownerID':_0x48f243});if(!_0x3a0d32[_0x2cb7c3(0x104)]){_0xec69c3['status'](0x194)['json']({'message':_0x2cb7c3(0x103)});return;}_0xec69c3[_0x2cb7c3(0x107)](0xc8)[_0x2cb7c3(0x134)]({'message':_0x2cb7c3(0x12c),'products':_0x3a0d32});}catch(_0x28ea4b){_0xec69c3[_0x2cb7c3(0x107)](0x1f4)['json']({'message':'Internal\x20server\x20error','error':_0x28ea4b});}})),router[a6_0x3bbd7d(0x138)]('/get/:companyID',authorise_2[a6_0x3bbd7d(0x110)],(_0x1d862d,_0x1fec8f)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x263a84=a6_0x3bbd7d;try{const {companyID:_0x5bea11}=_0x1d862d['params'],{userID:_0x4cfeb2,email:_0x509741}=_0x1d862d;if(!_0x4cfeb2&&!_0x509741){_0x1fec8f[_0x263a84(0x107)](0x190)[_0x263a84(0x134)]({'message':_0x263a84(0x115)});return;}const _0x3842d6={'ownerID':_0x4cfeb2,'companyID':_0x5bea11},_0x51f539=yield Product_1[_0x263a84(0x15d)][_0x263a84(0xfe)](_0x3842d6);if(!_0x51f539||_0x51f539[_0x263a84(0x104)]===0x0){_0x1fec8f['status'](0x194)[_0x263a84(0x134)]({'message':_0x263a84(0x100)});return;}_0x1fec8f[_0x263a84(0x107)](0xc8)[_0x263a84(0x134)]({'message':_0x263a84(0x12c),'products':_0x51f539});}catch(_0x468bc2){_0x1fec8f['status'](0x1f4)[_0x263a84(0x134)]({'message':_0x263a84(0x15a),'error':_0x468bc2});}})),router[a6_0x3bbd7d(0x138)]('/get/product/:companyID/:productID',authorise_2[a6_0x3bbd7d(0x110)],(_0x52670b,_0x2eb42c)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2d61dd=a6_0x3bbd7d;try{const {companyID:_0x2f7127}=_0x52670b[_0x2d61dd(0x13b)],{userID:_0x3842c2,email:_0x7f20b2}=_0x52670b;if(!_0x3842c2&&!_0x7f20b2){_0x2eb42c[_0x2d61dd(0x107)](0x190)[_0x2d61dd(0x134)]({'message':_0x2d61dd(0x115)});return;}const _0x4688cc={'ownerID':_0x3842c2,'companyID':_0x2f7127},_0x3d10fa=yield Product_1[_0x2d61dd(0x15d)][_0x2d61dd(0xfe)](_0x4688cc);if(!_0x3d10fa||_0x3d10fa[_0x2d61dd(0x104)]===0x0){_0x2eb42c['status'](0x194)[_0x2d61dd(0x134)]({'message':'No\x20products\x20found\x20for\x20the\x20given\x20user'});return;}_0x2eb42c[_0x2d61dd(0x107)](0xc8)[_0x2d61dd(0x134)]({'message':'Products\x20retrieved\x20successfully','products':_0x3d10fa});}catch(_0x48a40c){_0x2eb42c[_0x2d61dd(0x107)](0x1f4)[_0x2d61dd(0x134)]({'message':_0x2d61dd(0x15a),'error':_0x48a40c});}})),router['get'](a6_0x3bbd7d(0x102),(_0xf36523,_0x436e47)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x48ad09=a6_0x3bbd7d;try{const {productID:_0x131e32}=_0xf36523['params'],_0x31e1be={'_id':_0x131e32},_0x145936=yield Product_1['Product'][_0x48ad09(0x113)](_0x31e1be);if(!_0x145936){_0x436e47[_0x48ad09(0x107)](0x194)[_0x48ad09(0x134)]({'message':_0x48ad09(0x141)});return;}_0x436e47[_0x48ad09(0x107)](0xc8)[_0x48ad09(0x134)]({'message':_0x48ad09(0x12b),'product':_0x145936});}catch(_0x29ceb1){console[_0x48ad09(0x135)](_0x48ad09(0x156),_0x29ceb1),_0x436e47[_0x48ad09(0x107)](0x1f4)['json']({'message':'Internal\x20server\x20error','error':_0x29ceb1});}})),router['get']('/get/qr/:linkedQR',(_0x189ebb,_0x22f441)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2275f9=a6_0x3bbd7d;try{const {linkedQR:_0x12c4a5}=_0x189ebb['params'],_0x7b6d7={'linkedQR':_0x12c4a5},_0x306d21=yield Product_1[_0x2275f9(0x15d)]['findOne'](_0x7b6d7);if(!_0x306d21){_0x22f441[_0x2275f9(0x107)](0x194)[_0x2275f9(0x134)]({'message':'Product\x20not\x20found\x20for\x20the\x20given\x20company'});return;}_0x22f441[_0x2275f9(0x107)](0xc8)['json']({'message':_0x2275f9(0x12b),'product':_0x306d21});}catch(_0xf72ec){console[_0x2275f9(0x135)]('Error\x20retrieving\x20product:',_0xf72ec),_0x22f441['status'](0x1f4)[_0x2275f9(0x134)]({'message':'Internal\x20server\x20error','error':_0xf72ec});}})),router[a6_0x3bbd7d(0x138)]('/get/qr-auto/:autoQR',(_0x3d516a,_0x2f3399)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x47bf5a=a6_0x3bbd7d;try{const {autoQR:_0x4f672d}=_0x3d516a[_0x47bf5a(0x13b)],_0x492d28={'autoQR':_0x4f672d},_0x4a7df4=yield Product_1[_0x47bf5a(0x15d)][_0x47bf5a(0x113)](_0x492d28);if(!_0x4a7df4){_0x2f3399['status'](0x194)[_0x47bf5a(0x134)]({'message':_0x47bf5a(0x141)});return;}_0x2f3399[_0x47bf5a(0x107)](0xc8)[_0x47bf5a(0x134)]({'message':'Product\x20retrieved\x20successfully','product':_0x4a7df4});}catch(_0x3ca126){console['error'](_0x47bf5a(0x156),_0x3ca126),_0x2f3399[_0x47bf5a(0x107)](0x1f4)[_0x47bf5a(0x134)]({'message':_0x47bf5a(0x15a),'error':_0x3ca126});}})),router[a6_0x3bbd7d(0x111)](a6_0x3bbd7d(0x131),authorise_2[a6_0x3bbd7d(0x110)],upload[a6_0x3bbd7d(0x10c)]('images',0x5),(_0x335a54,_0x4a6775)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x42e471=a6_0x3bbd7d;try{const {productID:_0x27b3cc}=_0x335a54['params'],_0x770a69=_0x335a54;if(!_0x335a54[_0x42e471(0x12a)]||!(_0x335a54[_0x42e471(0x12a)]instanceof Array)){_0x4a6775[_0x42e471(0x107)](0x190)[_0x42e471(0x134)]({'message':'No\x20images\x20uploaded'});return;}const _0x52096e=yield Product_1[_0x42e471(0x15d)]['findOne']({'_id':_0x27b3cc,'ownerID':_0x770a69});if(!_0x52096e){_0x4a6775[_0x42e471(0x107)](0x194)['json']({'message':_0x42e471(0x105)});return;}const _0x524a6e=_0x335a54['files']['map'](_0x4f8af1=>_0x4f8af1[_0x42e471(0x13a)]);_0x52096e['imagesID']=[..._0x52096e['imagesID']||[],..._0x524a6e],yield _0x52096e[_0x42e471(0x150)](),_0x4a6775['status'](0xc8)[_0x42e471(0x134)]({'message':_0x42e471(0x142),'images':_0x524a6e,'product':_0x52096e});}catch(_0x5ba8cc){console[_0x42e471(0x135)](_0x42e471(0x152),_0x5ba8cc),_0x4a6775['status'](0x1f4)['json']({'message':_0x42e471(0x15a),'error':_0x5ba8cc});}})),router['delete'](a6_0x3bbd7d(0x127),authorise_2['default'],(_0x3737b3,_0x2b4a14)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4e492c=a6_0x3bbd7d;try{const {productID:_0x1234d3,filename:_0x5c626f}=_0x3737b3['params'],_0x262c84=_0x3737b3,_0x1f400c=yield Product_1[_0x4e492c(0x15d)][_0x4e492c(0x113)]({'_id':_0x1234d3,'ownerID':_0x262c84});if(!_0x1f400c){_0x2b4a14['status'](0x194)[_0x4e492c(0x134)]({'message':'Product\x20not\x20found\x20or\x20unauthorized'});return;}if(!_0x1f400c[_0x4e492c(0x157)]||!_0x1f400c[_0x4e492c(0x157)]['includes'](_0x5c626f)){_0x2b4a14[_0x4e492c(0x107)](0x190)['json']({'message':_0x4e492c(0x14f)});return;}const _0x4217bd=path_1['default']['join'](__dirname,'..',_0x4e492c(0x13f),_0x5c626f);fs_1[_0x4e492c(0x110)][_0x4e492c(0x139)](_0x4217bd,_0x66633a=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xb54394=_0x4e492c;if(_0x66633a){console['error'](_0xb54394(0x14e),_0x66633a),_0x2b4a14[_0xb54394(0x107)](0x1f4)[_0xb54394(0x134)]({'message':_0xb54394(0x114),'error':_0x66633a[_0xb54394(0x144)]});return;}_0x1f400c[_0xb54394(0x157)]=(_0x1f400c[_0xb54394(0x157)]||[])[_0xb54394(0x10f)](_0xb80ce2=>_0xb80ce2!==_0x5c626f),yield _0x1f400c[_0xb54394(0x150)](),_0x2b4a14[_0xb54394(0x107)](0xc8)[_0xb54394(0x134)]({'message':_0xb54394(0x160),'filename':_0x5c626f});}));}catch(_0x56ae63){console[_0x4e492c(0x135)](_0x4e492c(0x14c),_0x56ae63),_0x2b4a14[_0x4e492c(0x107)](0x1f4)[_0x4e492c(0x134)]({'message':_0x4e492c(0x15a),'error':_0x56ae63});}})),router[a6_0x3bbd7d(0x138)]('/get-images/:productID',authorise_2[a6_0x3bbd7d(0x110)],(_0x6805fd,_0x2babc3)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x19614f=a6_0x3bbd7d;try{const {productID:_0x3d6585}=_0x6805fd[_0x19614f(0x13b)],_0x114012=_0x6805fd,_0x45e4b2=yield Product_1[_0x19614f(0x15d)]['findOne']({'_id':_0x3d6585,'ownerID':_0x114012});if(!_0x45e4b2){_0x2babc3[_0x19614f(0x107)](0x194)['json']({'message':'Product\x20not\x20found\x20or\x20unauthorized'});return;}const _0x57eb60=_0x45e4b2[_0x19614f(0x157)]||[],_0x11656e=_0x57eb60[_0x19614f(0x122)](_0x3e7b1e=>{const _0xd750b8=_0x19614f;return _0x6805fd[_0xd750b8(0x147)]+_0xd750b8(0x109)+_0x6805fd[_0xd750b8(0x138)](_0xd750b8(0x15e))+_0xd750b8(0x120)+_0x3e7b1e;});_0x2babc3['status'](0xc8)['json']({'message':'Product\x20images\x20retrieved\x20successfully','images':_0x11656e});}catch(_0x29f334){console[_0x19614f(0x135)](_0x19614f(0x119),_0x29f334),_0x2babc3[_0x19614f(0x107)](0x1f4)[_0x19614f(0x134)]({'message':_0x19614f(0x15a),'error':_0x29f334});}})),router[a6_0x3bbd7d(0x138)]('/get-image/:productID/:imageName',authorise_2[a6_0x3bbd7d(0x110)],(_0x1b854a,_0x5d7a06)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x526fc5=a6_0x3bbd7d;try{const {productID:_0x3136d8,imageName:_0xc82ef5}=_0x1b854a[_0x526fc5(0x13b)],_0x5b9b5b=_0x1b854a,_0x4f3dbf=yield Product_1[_0x526fc5(0x15d)]['findOne']({'_id':_0x3136d8,'ownerID':_0x5b9b5b});if(!_0x4f3dbf){_0x5d7a06['status'](0x194)[_0x526fc5(0x134)]({'message':'Product\x20not\x20found\x20or\x20unauthorized'});return;}if(!_0x4f3dbf[_0x526fc5(0x157)]||!_0x4f3dbf['imagesID'][_0x526fc5(0x14d)](_0xc82ef5)){_0x5d7a06[_0x526fc5(0x107)](0x194)[_0x526fc5(0x134)]({'message':'Image\x20not\x20found\x20in\x20this\x20product'});return;}const _0x447d2c=path_1['default'][_0x526fc5(0x158)](__dirname,'..',_0x526fc5(0x13f),_0xc82ef5);if(!fs_1[_0x526fc5(0x110)][_0x526fc5(0x12e)](_0x447d2c)){_0x5d7a06[_0x526fc5(0x107)](0x194)[_0x526fc5(0x134)]({'message':_0x526fc5(0x145)});return;}_0x5d7a06[_0x526fc5(0x117)](_0x447d2c);}catch(_0x1b1abd){console[_0x526fc5(0x135)]('Get\x20Specific\x20Image\x20Error:',_0x1b1abd),_0x5d7a06[_0x526fc5(0x107)](0x1f4)[_0x526fc5(0x134)]({'message':_0x526fc5(0x15a),'error':_0x1b1abd});}})),exports[a6_0x3bbd7d(0x110)]=router;