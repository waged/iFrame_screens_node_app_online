'use strict';function a5_0x4ac0(){const _0x23f974=['next','12573459uJBIjb','express','prototype','/image/:imageName','success','originalname','array','ResponseHandler','Product\x20retrieved\x20successfully','A\x20display\x20with\x20the\x20same\x20MAC\x20already\x20exists\x20in\x20this\x20profile','Add\x20Display\x20Error:','32098EJeujf','resolve','Product\x20not\x20found\x20or\x20unauthorized','Error\x20retrieving\x20display:','1059940WyGKcq','delete','length','../models/Display','notFound','/storage_lcd','default','path','/edit/:id','getOwnPropertySymbols','unauthorized','userId','params','Display','Display\x20added\x20successfully','findOneAndDelete','internalServerError','../../../','save','Product\x20deleted\x20successfully','File\x20Deletion\x20Error:','No\x20products\x20found\x20for\x20this\x20owner','Get\x20Images\x20Error:','../../..','get','Missing\x20required\x20fields:\x20','defineProperty','now','imageIds','random','filepath:\x20','includes','1206170mXyaZq','join','Display\x20retrieved\x20successfully','hasOwnProperty','findOne','files','Image\x20not\x20associated\x20with\x20this\x20product','__esModule','1220NpjzHo','propertyIsEnumerable','/get/one/:displayId','existsSync','/image/:displayId/:filename','../middlewares/authorise','48FXwXiu','Failed\x20to\x20delete\x20the\x20file:\x20','round','Delete\x20Image\x20Error:','3843864kxwJpB','Internal\x20server\x20error:\x20','unlink','__rest','error','post','Image\x20deleted\x20successfully','Router','Get\x20Specific\x20Image\x20Error:','../handlers/error_handler','/add','No\x20images\x20uploaded','log','push','Image\x20file\x20does\x20not\x20exist\x20on\x20the\x20server','Images\x20uploaded\x20successfully','indexOf','40ePpugs','../../../storage_lcd','apply','Internal\x20server\x20error\x20:\x20','Product\x20not\x20found\x20for\x20the\x20given\x20company','/delete/:id','Error\x20retrieving\x20product:','body','host','protocol','value','67903QEUXON','/get/qr-auto/:autoQR','message','68rLbkRg','function','/images/:displayId','map','/all/:ownerId','then','__awaiter','multer','/storage_regal/','110091jzAYKx','mkdirSync','diskStorage','findOneAndUpdate','__importDefault','Display\x20not\x20found\x20for\x20the\x20given\x20company','image-','done'];a5_0x4ac0=function(){return _0x23f974;};return a5_0x4ac0();}const a5_0x241152=a5_0x1d67;function a5_0x1d67(_0x5a6ef9,_0xb4cc98){const _0x4ac04d=a5_0x4ac0();return a5_0x1d67=function(_0x1d67f2,_0x5bff33){_0x1d67f2=_0x1d67f2-0x1a4;let _0x458a5b=_0x4ac04d[_0x1d67f2];return _0x458a5b;},a5_0x1d67(_0x5a6ef9,_0xb4cc98);}(function(_0x1d0310,_0x1bf5d0){const _0x4dbfa8=a5_0x1d67,_0x12f083=_0x1d0310();while(!![]){try{const _0x1d35ca=parseInt(_0x4dbfa8(0x200))/0x1*(parseInt(_0x4dbfa8(0x1ab))/0x2)+parseInt(_0x4dbfa8(0x209))/0x3*(parseInt(_0x4dbfa8(0x1dd))/0x4)+-parseInt(_0x4dbfa8(0x1af))/0x5+-parseInt(_0x4dbfa8(0x1e1))/0x6+-parseInt(_0x4dbfa8(0x1cf))/0x7*(-parseInt(_0x4dbfa8(0x1f2))/0x8)+-parseInt(_0x4dbfa8(0x212))/0x9+-parseInt(_0x4dbfa8(0x1d7))/0xa*(-parseInt(_0x4dbfa8(0x1fd))/0xb);if(_0x1d35ca===_0x1bf5d0)break;else _0x12f083['push'](_0x12f083['shift']());}catch(_0x4aead6){_0x12f083['push'](_0x12f083['shift']());}}}(a5_0x4ac0,0xdae9d));var __awaiter=this&&this[a5_0x241152(0x206)]||function(_0x16bfe3,_0x5af5ea,_0x4bef4c,_0x310391){function _0x64e0b4(_0x1e36dc){return _0x1e36dc instanceof _0x4bef4c?_0x1e36dc:new _0x4bef4c(function(_0x906023){_0x906023(_0x1e36dc);});}return new(_0x4bef4c||(_0x4bef4c=Promise))(function(_0x2329e9,_0x3b1916){const _0x13dc41=a5_0x1d67;function _0x3dc962(_0x530bb9){const _0x39cc28=a5_0x1d67;try{_0x5c2979(_0x310391[_0x39cc28(0x211)](_0x530bb9));}catch(_0x193d2a){_0x3b1916(_0x193d2a);}}function _0x2a13b0(_0x3de4bf){try{_0x5c2979(_0x310391['throw'](_0x3de4bf));}catch(_0xe994d4){_0x3b1916(_0xe994d4);}}function _0x5c2979(_0x156b15){const _0x2f4153=a5_0x1d67;_0x156b15[_0x2f4153(0x210)]?_0x2329e9(_0x156b15[_0x2f4153(0x1fc)]):_0x64e0b4(_0x156b15[_0x2f4153(0x1fc)])[_0x2f4153(0x205)](_0x3dc962,_0x2a13b0);}_0x5c2979((_0x310391=_0x310391[_0x13dc41(0x1f4)](_0x16bfe3,_0x5af5ea||[]))[_0x13dc41(0x211)]());});},__rest=this&&this[a5_0x241152(0x1e4)]||function(_0x1c3610,_0x1da1dd){const _0x214083=a5_0x241152;var _0xb575ee={};for(var _0x5ebb7b in _0x1c3610)if(Object[_0x214083(0x214)][_0x214083(0x1d2)]['call'](_0x1c3610,_0x5ebb7b)&&_0x1da1dd[_0x214083(0x1f1)](_0x5ebb7b)<0x0)_0xb575ee[_0x5ebb7b]=_0x1c3610[_0x5ebb7b];if(_0x1c3610!=null&&typeof Object[_0x214083(0x1b8)]===_0x214083(0x201))for(var _0x46b7a7=0x0,_0x5ebb7b=Object[_0x214083(0x1b8)](_0x1c3610);_0x46b7a7<_0x5ebb7b['length'];_0x46b7a7++){if(_0x1da1dd['indexOf'](_0x5ebb7b[_0x46b7a7])<0x0&&Object[_0x214083(0x214)][_0x214083(0x1d8)]['call'](_0x1c3610,_0x5ebb7b[_0x46b7a7]))_0xb575ee[_0x5ebb7b[_0x46b7a7]]=_0x1c3610[_0x5ebb7b[_0x46b7a7]];}return _0xb575ee;},__importDefault=this&&this[a5_0x241152(0x20d)]||function(_0x1501dd){const _0xc513bf=a5_0x241152;return _0x1501dd&&_0x1501dd[_0xc513bf(0x1d6)]?_0x1501dd:{'default':_0x1501dd};};Object[a5_0x241152(0x1c9)](exports,'__esModule',{'value':!![]});const express_1=__importDefault(require(a5_0x241152(0x213))),Display_1=require(a5_0x241152(0x1b2)),authorise_1=__importDefault(require(a5_0x241152(0x1dc))),authorise_2=__importDefault(require('../middlewares/authorise')),multer_1=__importDefault(require(a5_0x241152(0x207))),path_1=__importDefault(require(a5_0x241152(0x1b6))),fs_1=__importDefault(require('fs')),error_handler_1=require(a5_0x241152(0x1ea)),router=express_1[a5_0x241152(0x1b5)][a5_0x241152(0x1e8)](),storageDir=path_1['default'][a5_0x241152(0x1ac)](a5_0x241152(0x1b4));!fs_1[a5_0x241152(0x1b5)][a5_0x241152(0x1da)](storageDir)&&fs_1['default']['mkdirSync'](storageDir,{'recursive':!![]});const storage=multer_1[a5_0x241152(0x1b5)][a5_0x241152(0x20b)]({'destination':(_0x22581e,_0x2d53e3,_0x43ab3e)=>{const _0x5b15af=a5_0x241152,_0x45de66=path_1[_0x5b15af(0x1b5)][_0x5b15af(0x1d0)](__dirname,_0x5b15af(0x1f3));fs_1[_0x5b15af(0x1b5)][_0x5b15af(0x20a)](_0x45de66,{'recursive':!![]}),_0x43ab3e(null,_0x45de66);},'filename':(_0xdcbc59,_0x3f0c93,_0x2bd482)=>{const _0x206fe4=a5_0x241152,_0x473287=Date[_0x206fe4(0x1ca)]()+'-'+Math[_0x206fe4(0x1df)](Math[_0x206fe4(0x1cc)]()*0x3b9aca00),_0x5e051d=path_1[_0x206fe4(0x1b5)]['extname'](_0x3f0c93[_0x206fe4(0x1a5)]);_0x2bd482(null,_0x206fe4(0x20f)+_0x473287+_0x5e051d);}}),upload=(0x0,multer_1['default'])({'storage':storage,'limits':{'fileSize':0x9*0x400*0x400}});router[a5_0x241152(0x1e6)](a5_0x241152(0x1eb),authorise_1[a5_0x241152(0x1b5)],(_0x135902,_0xe84047)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2c11af=a5_0x241152;try{const _0x13685b=_0x135902[_0x2c11af(0x1ba)],{name:_0x1f4703,macAddress:_0x37901c,isLandscape:_0x302620,producer:_0x42fb6b,category:_0x4e5a37,dimension:_0x38be64,description:_0x4529e6}=_0x135902[_0x2c11af(0x1f9)],_0x4e1bfb=[];if(!_0x13685b)_0x4e1bfb[_0x2c11af(0x1ee)]('ownerId');if(!_0x1f4703)_0x4e1bfb[_0x2c11af(0x1ee)]('name');if(_0x4e1bfb[_0x2c11af(0x1b1)]>0x0){error_handler_1['ResponseHandler']['error'](_0xe84047,_0x2c11af(0x1c8)+_0x4e1bfb[_0x2c11af(0x1d0)](',\x20'),0x190);return;}const _0x1c320a=yield Display_1[_0x2c11af(0x1bc)][_0x2c11af(0x1d3)]({'macAddress':_0x37901c});if(_0x1c320a){error_handler_1['ResponseHandler'][_0x2c11af(0x1e5)](_0xe84047,_0x2c11af(0x1a9),0x190);return;}const _0x1d00aa=new Display_1[(_0x2c11af(0x1bc))]({'name':_0x1f4703,'macAddress':_0x37901c,'ownerId':_0x13685b,'description':_0x4529e6,'isLandscape':_0x302620,'producer':_0x42fb6b,'category':_0x4e5a37,'dimension':_0x38be64});yield _0x1d00aa[_0x2c11af(0x1c1)](),error_handler_1['ResponseHandler'][_0x2c11af(0x1a4)](_0xe84047,_0x1d00aa,_0x2c11af(0x1bd));}catch(_0x23270b){console['error'](_0x2c11af(0x1aa),_0x23270b),error_handler_1[_0x2c11af(0x1a7)][_0x2c11af(0x1bf)](_0xe84047,_0x23270b);}})),router['put'](a5_0x241152(0x1b7),authorise_1[a5_0x241152(0x1b5)],(_0x3a5edd,_0x3480cb)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2b5c4f=a5_0x241152;try{const {id:_0xb0f9e9}=_0x3a5edd[_0x2b5c4f(0x1bb)],{userId:_0x2dc820}=_0x3a5edd,_0x31a75a=__rest(_0x3a5edd[_0x2b5c4f(0x1f9)],[]),_0xd3eb94=yield Display_1[_0x2b5c4f(0x1bc)][_0x2b5c4f(0x20c)]({'_id':_0xb0f9e9,'ownerId':_0x2dc820},_0x31a75a,{'new':!![],'runValidators':!![]});if(!_0xd3eb94){error_handler_1['ResponseHandler'][_0x2b5c4f(0x1b9)](_0x3480cb);return;}error_handler_1[_0x2b5c4f(0x1a7)][_0x2b5c4f(0x1a4)](_0x3480cb,_0xd3eb94);}catch(_0x4b3c1d){error_handler_1[_0x2b5c4f(0x1a7)][_0x2b5c4f(0x1bf)](_0x3480cb,_0x2b5c4f(0x1e2)+_0x4b3c1d);}})),router[a5_0x241152(0x1b0)](a5_0x241152(0x1f7),authorise_1['default'],(_0x1f4fff,_0xb96b7d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xd7e528=a5_0x241152;try{const {id:_0x211d7d}=_0x1f4fff[_0xd7e528(0x1bb)],_0x467b3c=_0x1f4fff['userId'],_0x3d5b06=yield Display_1[_0xd7e528(0x1bc)][_0xd7e528(0x1be)]({'_id':_0x211d7d,'ownerID':_0x467b3c});if(!_0x3d5b06){error_handler_1[_0xd7e528(0x1a7)][_0xd7e528(0x1b9)](_0xb96b7d,_0xd7e528(0x1ad));return;}error_handler_1[_0xd7e528(0x1a7)][_0xd7e528(0x1a4)](_0xb96b7d,_0x3d5b06,_0xd7e528(0x1c2));}catch(_0x1fbe9d){error_handler_1[_0xd7e528(0x1a7)][_0xd7e528(0x1bf)](_0xb96b7d,'Internal\x20server\x20error\x20:\x20'+_0x1fbe9d);}})),router[a5_0x241152(0x1c7)](a5_0x241152(0x204),authorise_1[a5_0x241152(0x1b5)],(_0x3f8e87,_0x26626c)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x571d4e=a5_0x241152;try{const {ownerId:_0x33fa68}=_0x3f8e87[_0x571d4e(0x1bb)],_0x42dc9a=yield Display_1[_0x571d4e(0x1bc)]['find']({'ownerId':_0x33fa68});if(!_0x42dc9a[_0x571d4e(0x1b1)]){error_handler_1['ResponseHandler'][_0x571d4e(0x1b3)](_0x26626c,_0x571d4e(0x1c4));return;}error_handler_1[_0x571d4e(0x1a7)][_0x571d4e(0x1a4)](_0x26626c,_0x42dc9a);}catch(_0x48c02f){error_handler_1['ResponseHandler'][_0x571d4e(0x1bf)](_0x26626c,_0x571d4e(0x1f5)+_0x48c02f);}})),router[a5_0x241152(0x1c7)](a5_0x241152(0x1d9),(_0xcbdec8,_0x3f3b17)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x336974=a5_0x241152;try{const {displayId:_0xb6990d}=_0xcbdec8[_0x336974(0x1bb)],_0x4080c2={'_id':_0xb6990d},_0x540e75=yield Display_1[_0x336974(0x1bc)][_0x336974(0x1d3)](_0x4080c2);if(!_0x540e75){error_handler_1['ResponseHandler']['notFound'](_0x3f3b17,_0x336974(0x1f6));return;}error_handler_1[_0x336974(0x1a7)][_0x336974(0x1a4)](_0x3f3b17,_0x540e75,_0x336974(0x1a8));}catch(_0x4a113d){console[_0x336974(0x1e5)](_0x336974(0x1f8),_0x4a113d),error_handler_1['ResponseHandler'][_0x336974(0x1bf)](_0x3f3b17,'Internal\x20server\x20error\x20:\x20'+_0x4a113d);}})),router[a5_0x241152(0x1c7)](a5_0x241152(0x1fe),(_0x39a49b,_0x329df8)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x29a587=a5_0x241152;try{const {autoQR:_0x1730cc}=_0x39a49b['params'],_0x5e348e={'autoQR':_0x1730cc},_0x30ef91=yield Display_1['Display'][_0x29a587(0x1d3)](_0x5e348e);if(!_0x30ef91){error_handler_1[_0x29a587(0x1a7)][_0x29a587(0x1b3)](_0x329df8,_0x29a587(0x20e));return;}error_handler_1[_0x29a587(0x1a7)][_0x29a587(0x1a4)](_0x329df8,_0x30ef91,_0x29a587(0x1d1));}catch(_0xfd6857){console[_0x29a587(0x1e5)](_0x29a587(0x1ae),_0xfd6857),error_handler_1[_0x29a587(0x1a7)][_0x29a587(0x1bf)](_0x329df8,_0x29a587(0x1f5)+_0xfd6857);}})),router['post'](a5_0x241152(0x202),authorise_2[a5_0x241152(0x1b5)],upload[a5_0x241152(0x1a6)]('images',0x5),(_0x42fc56,_0x36a0c9)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x505173=a5_0x241152;try{const {displayId:_0x57366a}=_0x42fc56[_0x505173(0x1bb)],_0x261d1a=_0x42fc56[_0x505173(0x1ba)];if(!_0x42fc56[_0x505173(0x1d4)]||!(_0x42fc56[_0x505173(0x1d4)]instanceof Array)){error_handler_1[_0x505173(0x1a7)][_0x505173(0x1b3)](_0x36a0c9,_0x505173(0x1ec));return;}const _0x5a4303=yield Display_1[_0x505173(0x1bc)][_0x505173(0x1d3)]({'_id':_0x57366a,'ownerID':_0x261d1a});if(!_0x5a4303){error_handler_1[_0x505173(0x1a7)]['unauthorized'](_0x36a0c9,'Product\x20not\x20found\x20or\x20unauthorized');return;}const _0xbcf153=_0x42fc56[_0x505173(0x1d4)][_0x505173(0x203)](_0x500738=>_0x500738['filename']);_0x5a4303[_0x505173(0x1cb)]=[..._0x5a4303[_0x505173(0x1cb)]||[],..._0xbcf153],yield _0x5a4303['save'](),error_handler_1['ResponseHandler']['success'](_0x36a0c9,_0x5a4303,_0x505173(0x1f0));}catch(_0x88b820){console[_0x505173(0x1e5)]('Image\x20Upload\x20Error:',_0x88b820),error_handler_1['ResponseHandler'][_0x505173(0x1bf)](_0x36a0c9,'Internal\x20server\x20error\x20:\x20'+_0x88b820);}})),router[a5_0x241152(0x1b0)](a5_0x241152(0x1db),authorise_2['default'],(_0x40ae59,_0x255d4e)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5f11b6=a5_0x241152;try{const {displayId:_0x16f43a,filename:_0x1f18fb}=_0x40ae59['params'],_0x1ae112=_0x40ae59[_0x5f11b6(0x1ba)],_0x297ad5=yield Display_1['Display'][_0x5f11b6(0x1d3)]({'_id':_0x16f43a,'ownerId':_0x1ae112});if(!_0x297ad5){error_handler_1[_0x5f11b6(0x1a7)][_0x5f11b6(0x1b3)](_0x255d4e,_0x5f11b6(0x1ad));return;}if(!_0x297ad5[_0x5f11b6(0x1cb)]||!_0x297ad5[_0x5f11b6(0x1cb)][_0x5f11b6(0x1ce)](_0x1f18fb)){error_handler_1[_0x5f11b6(0x1a7)]['notFound'](_0x255d4e,_0x5f11b6(0x1d5));return;}const _0x32b3ac=path_1['default'][_0x5f11b6(0x1d0)](__dirname,_0x5f11b6(0x1c0),storageDir,_0x1f18fb);fs_1['default'][_0x5f11b6(0x1e3)](_0x32b3ac,_0x4d183e=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x44e21e=_0x5f11b6;if(_0x4d183e){console[_0x44e21e(0x1e5)](_0x44e21e(0x1c3),_0x4d183e),error_handler_1[_0x44e21e(0x1a7)][_0x44e21e(0x1e5)](_0x255d4e,_0x44e21e(0x1de)+_0x4d183e[_0x44e21e(0x1ff)],0x19a);return;}_0x297ad5['imageIds']=(_0x297ad5['imageIds']||[])['filter'](_0x18157c=>_0x18157c!==_0x1f18fb),yield _0x297ad5[_0x44e21e(0x1c1)](),error_handler_1[_0x44e21e(0x1a7)][_0x44e21e(0x1a4)](_0x255d4e,_0x297ad5,_0x44e21e(0x1e7));}));}catch(_0xe45f97){console[_0x5f11b6(0x1e5)](_0x5f11b6(0x1e0),_0xe45f97),error_handler_1[_0x5f11b6(0x1a7)][_0x5f11b6(0x1bf)](_0x255d4e,_0x5f11b6(0x1e2)+_0xe45f97);}})),router['get'](a5_0x241152(0x202),(_0xf35243,_0x5b4940)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x363d86=a5_0x241152;try{const {displayId:_0x16e1ba}=_0xf35243[_0x363d86(0x1bb)],_0x5591a1=_0xf35243,_0x52bd82=yield Display_1['Display'][_0x363d86(0x1d3)]({'_id':_0x16e1ba,'ownerID':_0x5591a1});if(!_0x52bd82){error_handler_1[_0x363d86(0x1a7)]['unauthorized'](_0x5b4940);return;}const _0x9ac849=_0x52bd82['imageIds']||[],_0x2d8129=_0x9ac849[_0x363d86(0x203)](_0x59925c=>{const _0x342c22=_0x363d86;return _0xf35243[_0x342c22(0x1fb)]+'://'+_0xf35243[_0x342c22(0x1c7)](_0x342c22(0x1fa))+_0x342c22(0x208)+_0x59925c;});error_handler_1[_0x363d86(0x1a7)]['success'](_0x5b4940,_0x2d8129);}catch(_0x2fce40){console[_0x363d86(0x1e5)](_0x363d86(0x1c5),_0x2fce40),error_handler_1[_0x363d86(0x1a7)][_0x363d86(0x1bf)](_0x5b4940,_0x363d86(0x1e2)+_0x2fce40);}})),router[a5_0x241152(0x1c7)](a5_0x241152(0x215),(_0x35988e,_0x3998a8)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3e4c35=a5_0x241152;try{const {imageName:_0x497008}=_0x35988e[_0x3e4c35(0x1bb)],_0x50982e=path_1[_0x3e4c35(0x1b5)][_0x3e4c35(0x1d0)](__dirname,_0x3e4c35(0x1c6),storageDir,_0x497008);console[_0x3e4c35(0x1ed)](_0x3e4c35(0x1cd)+_0x50982e);if(!fs_1[_0x3e4c35(0x1b5)]['existsSync'](_0x50982e)){error_handler_1['ResponseHandler'][_0x3e4c35(0x1b3)](_0x3998a8,_0x3e4c35(0x1ef));return;}_0x3998a8['sendFile'](_0x50982e);}catch(_0x2e6f59){console['error'](_0x3e4c35(0x1e9),_0x2e6f59),error_handler_1[_0x3e4c35(0x1a7)][_0x3e4c35(0x1bf)](_0x3998a8,_0x3e4c35(0x1f5)+_0x2e6f59);}})),exports[a5_0x241152(0x1b5)]=router;