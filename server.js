'use strict';const a7_0x1215ef=a7_0x540e;(function(_0x5b6532,_0x13f9bc){const _0x17b729=a7_0x540e,_0x5baf0a=_0x5b6532();while(!![]){try{const _0x279fd9=parseInt(_0x17b729(0xd0))/0x1*(-parseInt(_0x17b729(0xcb))/0x2)+-parseInt(_0x17b729(0xbc))/0x3*(-parseInt(_0x17b729(0xc4))/0x4)+-parseInt(_0x17b729(0xe4))/0x5*(parseInt(_0x17b729(0xc8))/0x6)+parseInt(_0x17b729(0xda))/0x7*(parseInt(_0x17b729(0xe3))/0x8)+-parseInt(_0x17b729(0xd4))/0x9+parseInt(_0x17b729(0xeb))/0xa+parseInt(_0x17b729(0xbb))/0xb;if(_0x279fd9===_0x13f9bc)break;else _0x5baf0a['push'](_0x5baf0a['shift']());}catch(_0xb5d118){_0x5baf0a['push'](_0x5baf0a['shift']());}}}(a7_0x3cb1,0x4bf94));function a7_0x3cb1(){const _0x17a00c=['map','X-Content-Type-Options','defineProperty','Regal\x20Server\x20is\x20running\x20securely\x20at\x20port\x20:','entries','0.0.0.0','cookie-parser','/frame/api/user','request-ip','config','connectDB','MONGO_USER','./routes/userRoutes','readFileSync','4444253UaHUYy','1220676HBBxNk','use','query','/etc/letsencrypt/live/things-connect.net/fullchain.pem','next','127.0.0.1','env','/frame/Waged','4Zljsau','error','trusted-cdn.com','Hello,\x20this\x20is\x20Waged!','47520EKMZbJ','done','params','10036zlMMgt','__esModule','\x27self\x27','express','contentSecurityPolicy','55onkBSf','status','MONGO_PASS','apply','4646628uPKxEV','MONGO_DB','get','/etc/letsencrypt/live/things-connect.net/privkey.pem','dotenv','nosniff','610925qVnWtA','set','MONGO_OPTIONS','connect','body-parser','json','100kb','express-rate-limit','throw','8KepJVd','40UOcLcd','body','string','log','fromEntries','MONGO_PORT','default','2686400hCInDt','header','Connected\x20to\x20MongoDB\x20database:\x20iframe\x20screens','value','MongoDB\x20connection\x20error:','X-Frame-Options','SAMEORIGIN','__awaiter'];a7_0x3cb1=function(){return _0x17a00c;};return a7_0x3cb1();}var __awaiter=this&&this[a7_0x1215ef(0xf2)]||function(_0x24a0e0,_0x30362f,_0x526eb6,_0x431e10){function _0x1c83ad(_0x37534c){return _0x37534c instanceof _0x526eb6?_0x37534c:new _0x526eb6(function(_0x532821){_0x532821(_0x37534c);});}return new(_0x526eb6||(_0x526eb6=Promise))(function(_0x490bdd,_0x56003f){const _0x12830c=a7_0x540e;function _0x2337ff(_0x54ac07){const _0x497f8a=a7_0x540e;try{_0x3a6b15(_0x431e10[_0x497f8a(0xc0)](_0x54ac07));}catch(_0x1d28ca){_0x56003f(_0x1d28ca);}}function _0x2ded86(_0xa9a6ca){const _0x3a9e61=a7_0x540e;try{_0x3a6b15(_0x431e10[_0x3a9e61(0xe2)](_0xa9a6ca));}catch(_0x20fd1e){_0x56003f(_0x20fd1e);}}function _0x3a6b15(_0x5b1371){const _0x1d656b=a7_0x540e;_0x5b1371[_0x1d656b(0xc9)]?_0x490bdd(_0x5b1371[_0x1d656b(0xee)]):_0x1c83ad(_0x5b1371['value'])['then'](_0x2337ff,_0x2ded86);}_0x3a6b15((_0x431e10=_0x431e10[_0x12830c(0xd3)](_0x24a0e0,_0x30362f||[]))['next']());});},__importDefault=this&&this['__importDefault']||function(_0x3e5ec4){const _0x51f480=a7_0x1215ef;return _0x3e5ec4&&_0x3e5ec4[_0x51f480(0xcc)]?_0x3e5ec4:{'default':_0x3e5ec4};};Object[a7_0x1215ef(0xaf)](exports,a7_0x1215ef(0xcc),{'value':!![]}),exports[a7_0x1215ef(0xb7)]=void 0x0;const express_1=__importDefault(require(a7_0x1215ef(0xce))),https_1=__importDefault(require('https')),fs_1=__importDefault(require('fs')),helmet_1=__importDefault(require('helmet')),express_rate_limit_1=__importDefault(require(a7_0x1215ef(0xe1))),cookie_parser_1=__importDefault(require(a7_0x1215ef(0xb3))),request_ip_1=__importDefault(require(a7_0x1215ef(0xb5))),body_parser_1=__importDefault(require(a7_0x1215ef(0xde))),cors_1=__importDefault(require('cors')),xss_1=__importDefault(require('xss')),mongoose_1=__importDefault(require('mongoose')),dotenv_1=__importDefault(require(a7_0x1215ef(0xd8))),userRoutes_1=__importDefault(require(a7_0x1215ef(0xb9))),displayRoutes_1=__importDefault(require('./routes/displayRoutes'));dotenv_1[a7_0x1215ef(0xea)][a7_0x1215ef(0xb6)]();const app=(0x0,express_1[a7_0x1215ef(0xea)])(),PORT=0x2328,connectDB=()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3aa9b3=a7_0x1215ef;try{const _0x380632='mongodb://'+process[_0x3aa9b3(0xc2)][_0x3aa9b3(0xb8)]+':'+process[_0x3aa9b3(0xc2)][_0x3aa9b3(0xd2)]+'@'+process['env']['MONGO_HOST']+':'+process[_0x3aa9b3(0xc2)][_0x3aa9b3(0xe9)]+'/'+process[_0x3aa9b3(0xc2)][_0x3aa9b3(0xd5)]+'?'+process[_0x3aa9b3(0xc2)][_0x3aa9b3(0xdc)];yield mongoose_1[_0x3aa9b3(0xea)][_0x3aa9b3(0xdd)](_0x380632),console[_0x3aa9b3(0xe7)](_0x3aa9b3(0xed));}catch(_0xd61281){console[_0x3aa9b3(0xc5)](_0x3aa9b3(0xef),_0xd61281),process['exit'](0x1);}});exports[a7_0x1215ef(0xb7)]=connectDB;const sslOptions={'key':fs_1[a7_0x1215ef(0xea)]['readFileSync'](a7_0x1215ef(0xd7)),'cert':fs_1[a7_0x1215ef(0xea)][a7_0x1215ef(0xba)](a7_0x1215ef(0xbf))},limiter=(0x0,express_rate_limit_1[a7_0x1215ef(0xea)])({'windowMs':0xf*0x3c*0x3e8,'max':0x320,'keyGenerator':_0x3caf32=>request_ip_1[a7_0x1215ef(0xea)]['getClientIp'](_0x3caf32)||'unknown'}),sanitizeMiddleware=(_0x39b1d4,_0x5970fb,_0x4cbd00)=>{const _0x471c08=a7_0x1215ef,_0x5545c0=_0x5084a8=>typeof _0x5084a8===_0x471c08(0xe6)?(0x0,xss_1[_0x471c08(0xea)])(_0x5084a8):_0x5084a8;if(_0x39b1d4['body'])_0x39b1d4[_0x471c08(0xe5)]=Object[_0x471c08(0xe8)](Object[_0x471c08(0xb1)](_0x39b1d4[_0x471c08(0xe5)])['map'](([_0x19c3b1,_0x3d86ae])=>[_0x19c3b1,_0x5545c0(_0x3d86ae)]));if(_0x39b1d4[_0x471c08(0xbe)])_0x39b1d4[_0x471c08(0xbe)]=Object[_0x471c08(0xe8)](Object[_0x471c08(0xb1)](_0x39b1d4['query'])[_0x471c08(0xf3)](([_0x4267a4,_0x1f42c1])=>[_0x4267a4,_0x5545c0(_0x1f42c1)]));if(_0x39b1d4['params'])_0x39b1d4[_0x471c08(0xca)]=Object[_0x471c08(0xe8)](Object[_0x471c08(0xb1)](_0x39b1d4['params'])[_0x471c08(0xf3)](([_0x1351a3,_0x39036c])=>[_0x1351a3,_0x5545c0(_0x39036c)]));_0x4cbd00();};app[a7_0x1215ef(0xbd)](express_1['default']['json']()),app[a7_0x1215ef(0xbd)](body_parser_1[a7_0x1215ef(0xea)][a7_0x1215ef(0xdf)]({'limit':a7_0x1215ef(0xe0)})),app[a7_0x1215ef(0xbd)](body_parser_1[a7_0x1215ef(0xea)]['urlencoded']({'extended':!![],'limit':a7_0x1215ef(0xe0)})),app[a7_0x1215ef(0xbd)]((0x0,cookie_parser_1[a7_0x1215ef(0xea)])()),app[a7_0x1215ef(0xbd)]((0x0,cors_1[a7_0x1215ef(0xea)])()),app[a7_0x1215ef(0xbd)](request_ip_1['default']['mw']()),app[a7_0x1215ef(0xbd)](sanitizeMiddleware),app[a7_0x1215ef(0xbd)](limiter),app['use']((0x0,helmet_1[a7_0x1215ef(0xea)])()),app[a7_0x1215ef(0xbd)]((_0x30f88a,_0x149c72,_0x1642be)=>{const _0x341968=a7_0x1215ef;_0x149c72[_0x341968(0xec)](_0x341968(0xf4),_0x341968(0xd9)),_0x149c72[_0x341968(0xec)](_0x341968(0xf0),_0x341968(0xf1)),_0x149c72[_0x341968(0xec)]('X-XSS-Protection','1;\x20mode=block'),_0x1642be();}),app[a7_0x1215ef(0xbd)](helmet_1[a7_0x1215ef(0xea)][a7_0x1215ef(0xcf)]({'directives':{'defaultSrc':[a7_0x1215ef(0xcd)],'scriptSrc':[a7_0x1215ef(0xcd),a7_0x1215ef(0xc6)]}})),app[a7_0x1215ef(0xdb)]('trust\x20proxy',a7_0x1215ef(0xc1)),(0x0,exports[a7_0x1215ef(0xb7)])(),app[a7_0x1215ef(0xbd)](a7_0x1215ef(0xb4),userRoutes_1[a7_0x1215ef(0xea)]),app['use']('/frame/api/display',displayRoutes_1['default']),app[a7_0x1215ef(0xd6)](a7_0x1215ef(0xc3),(_0x5edfd5,_0x5ae9ae)=>{const _0x333eef=a7_0x1215ef;_0x5ae9ae[_0x333eef(0xd1)](0xc8)[_0x333eef(0xdf)]({'message':_0x333eef(0xc7)});});function a7_0x540e(_0x14474a,_0x1a86be){const _0x3cb1b6=a7_0x3cb1();return a7_0x540e=function(_0x540e31,_0x208aa4){_0x540e31=_0x540e31-0xaf;let _0x347f32=_0x3cb1b6[_0x540e31];return _0x347f32;},a7_0x540e(_0x14474a,_0x1a86be);}const server=https_1[a7_0x1215ef(0xea)]['createServer'](sslOptions,app);server['listen'](PORT,a7_0x1215ef(0xb2),()=>{const _0x5b3fc7=a7_0x1215ef;console['log'](_0x5b3fc7(0xb0)+PORT);});